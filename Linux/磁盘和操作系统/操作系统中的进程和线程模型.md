### 操作系统中的进程和线程模型


<br/>

#### 原由
* 操作系统是一项非常重要的基础课，其中很多的理念都在很多语言中用到，学习这一门课非常有必要
* 关于对多进程和多线程理解不到位，对程序中资源分配理解不到位，所以需要着重学习

<br/>

#### 学习要点
* 内存分配相关要点：
    * 堆：即平时所说的动态内存，包括new，malloc动态分配的内存
    * 栈：维护上下文所需内存，比如线程的上下文，即**线程独有的栈**
    * 数据段：存放全局变量，静态变量的
* 线程资源清理相关要点：
    * Python中并没有API刻意直接清理多线程中的某个线程，但可以使用ctypes触发线程异常或者设立标记位，直接退出主线程，守护线程也会结束
    * Linux中如果线程正常退出或者执行完毕，会释放资源，如果是异常退出，需要对资源进行释放操作
* 多进程读写同一文件问题解答：
    * 两个进程读写同一文件会返回两个fd(文件描述符)
    * 操作系统并不保证原子性，比如说同一时间，只能有一个进程可以写该文件，具体写的时长有操作系统决定，可能第一个进程写了一行，后续进程写了两行，反复且无序
    * 如果一个进程关闭了文件描述符，另外一个进程并不会报错，仍然可以继续读写，因为内核中针对打开的文件有个file对象，当file对象引用计数为0后，才会销毁该对象；如果是多线程的话，会立即报错
* 虚拟内存：虚拟内存是计算机系统内存管理的一种技术。它使得应用程序认为它拥有连续可用的内存(一个连续完整的地址)，而实际上，它是被分割成多个物理内存的碎片，还有部分暂时存储在外部的磁盘存储器上，在需要时进行数据交换。


<br/>

#### 现有疑问
* 现代操作系统书中说：一个线程可以读，可以写，甚至可以清除另外一个线程的堆栈，线程之间可以相互杀死么？
* 两个线程同时发现没有内存了，同时申请扩容内存？而此时也没有那么大的内存可以申请了，会怎么样？



<br/>
#### 参考资料
* [现代操作系统 第四版](https://book.douban.com/subject/27096665/)
* [多进程读写同一文件](https://blog.csdn.net/weibo1230123/article/details/83045458)
* [虚拟内存介绍](https://baike.baidu.com/item/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98/101812?fr=aladdin)
